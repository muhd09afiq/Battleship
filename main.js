(()=>{"use strict";var e={790:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(601),a=r.n(n),o=r(314),i=r.n(o)()(a());i.push([e.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""]);const s=i},16:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(601),a=r.n(n),o=r(314),i=r.n(o)()(a());i.push([e.id,"* {\n  box-sizing: border-box;\n}\n\n.wrapper {\n  display: flex;\n  justify-content: center; /* Horizontally center */\n  align-items: center; /* Vertically center */\n  height: 80vh;\n  gap: 0.625rem;\n  flex-wrap: wrap;\n  margin-top: 10px;\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  gap: 1px;\n  width: 300px;\n  height: 300px;\n}\n\n.grid-square {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid #ccc;\n  background-color: #f0f0f0;\n  color: #f0f0f0;\n}\n\nbutton {\n  margin: 5px;\n}\n",""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var h=r(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var m=a(p,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var o=n(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=r(o[i]);t[s].references--}for(var l=n(e,a),c=0;c<o.length;c++){var d=r(o[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=l}}},659:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0;var n=r(72),a=r.n(n),o=r(825),i=r.n(o),s=r(659),l=r.n(s),c=r(56),d=r.n(c),u=r(540),h=r.n(u),p=r(113),m=r.n(p),g=r(790),y={};y.styleTagTransform=m(),y.setAttributes=d(),y.insert=l().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=h(),a()(g.A,y),g.A&&g.A.locals&&g.A.locals;var f=r(16),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=h(),a()(f.A,v),f.A&&f.A.locals&&f.A.locals;class b{constructor(e,t){this._shipLength=e,this._hit=0,this.color=t}hit(){this._hit=this._hit+1}getHit(){return this._hit}getShipLength(){return this._shipLength}isSunk(){return this._hit>=this._shipLength}}class S{constructor(e){this._player=e,this._board={},this.createBoard(),this._activeShip=[],this._missedHitCoordinate=[],this.shipCoordinate=[]}createBoard(){let e="ABCDEFGHIJ";e=e.split(""),e.forEach((e=>{for(let t=1;t<11;t++)this._board[e+t]=null}))}resetBoard(){this._activeShip=[],this._missedHitCoordinate=[],this.shipCoordinate=[]}getBoard(){return this._board}getPlayer(){return this._player}getCoordinateStatus(e){return this._board[e]}placeShip(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e.getShipLength();if(r=Number(r),n){let n=[],o="ABCDEFGHIJ";o=o.split("");let i=o.indexOf(t);if(i+a>o.length)throw n=[],new Error("Ship out of bound");for(let e=0;e<a;e++){let t=o.at(i+e)+r;if(null!==this._board[t])throw n=[],new Error(`Coordinate ${t} already occupied`);n.push(t)}n.forEach((t=>{this._board[t]=e})),this.updateShip(e)}else{let n=[];if(r+a>10)throw n=[],new Error("Ship out of bound");for(let e=0;e<a;e++){let a=t+(e+r);if(null!==this._board[a])throw n=[],new Error(`Coordinate ${a} already occupied`);n.push(a)}n.forEach((t=>{this._board[t]=e})),this.updateShip(e)}}updateShip(e){this._activeShip.push(e)}updateShipToDOM(e){document.getElementById(`${this._player}-${e}`).style.backgroundColor="black"}receiveAttack(e){const t=this._board[e];return t&&t instanceof b?(t.hit(),this._board[e]="hit",this.updateHitToDOM(e),"hit"):"hit"==t||"miss"==t?"already hit":(this._board[e]="miss",this._missedHitCoordinate.push(e),this.updateMissToDOM(e),"miss")}updateMissToDOM(e){document.getElementById(`${this.getPlayer()}-${e}`).style.backgroundColor="grey"}updateHitToDOM(e){document.getElementById(`${this.getPlayer()}-${e}`).style.backgroundColor="#E4080A"}getAllShipStatus(){const e=this._activeShip,t=e.length;let r=0;return e.forEach((e=>{!0===e.isSunk()&&(r+=1)})),r!==t}getMissedHitCoordinate(){return this._missedHitCoordinate}}class E{constructor(e){this.name=e,this.gameboard=null}}class w{constructor(e,t){this.player=e,this.gameboard=t,this.boardPreview=!0}createContainer(){const e=document.createElement("div");e.id=`${this.player}-grid`,e.classList.add("grid-container"),document.querySelector(".wrapper").appendChild(e)}createGridPlayer(e,t){const r=["1","2","3","4","5","6","7","8","9","10"],n=["A","B","C","D","E","F","G","H","I","J"];for(let a=0;a<10;a++)for(let o=0;o<10;o++){const i=document.createElement("div");i.classList.add("grid-square"),i.id=`${e.name}-${n[a]}${r[o]}`,t.appendChild(i)}}changeBoardPreview(){this.boardPreview=!1}addEventListener(e,t){e.addEventListener("click",(()=>{const e=this.gameboard.receiveAttack(t);console.log(e),this.gameboard.getAllShipStatus()?console.log("Ship still alive, continue game"):console.log("All ship destroyed, game end")}))}updateShipToDOM(e,t){const r=t.getBoard();for(let t in r)if(null!==r[t]){const n=document.getElementById(`${e.name}-${t}`),a=r[t];n.style.backgroundColor=a.color}}}const A=new class{constructor(){this.playerHuman=new E("Human"),this.playerCPU=new E("CPU"),this.cpuGridArray=[],this.hitArray=[],this.whoWin=""}initializeBoard(){this.playerHuman.gameboard=new S("Human"),this.playerCPU.gameboard=new S("CPU");const e=this.playerHuman,t=e.gameboard,r=this.playerCPU,n=r.gameboard;this.placeShip(this.playerHuman),this.placeShip(this.playerCPU);const a=document.querySelector("dialog");document.addEventListener("keydown",(e=>{"Escape"===e.key&&a.open&&e.preventDefault()}));const o=document.querySelector(".grid-container");a.showModal();const i=new w(e,t);i.createGridPlayer(e,o),i.updateShipToDOM(e,t),document.querySelector("#start-game").addEventListener("click",(()=>{a.close();const o=new w(e,t),i=new w(r,n);i.changeBoardPreview();const s=document.getElementById("player-grid"),l=document.getElementById("cpu-grid");s.classList.add("grid-container"),l.classList.add("grid-container"),o.createGridPlayer(e,s),i.createGridPlayer(r,l),o.updateShipToDOM(e,t)})),document.getElementById("randomizeShip").addEventListener("click",(()=>{t.createBoard(),this.placeShip(this.playerHuman),document.querySelectorAll(".grid-square").forEach((e=>{e.style.backgroundColor="#f0f0f0"})),i.updateShipToDOM(e,t)})),this.resetGame()}placeShip(e){[new b(5,"#a87132"),new b(4,"purple"),new b(3,"#32a8a8"),new b(3,"black"),new b(2,"blue")].forEach((t=>{let r=0;for(;r<10;)try{const r=this.provideRandomizeInputForShipPlacement();let n=Math.floor(11*Math.random());return void e.gameboard.placeShip(t,r.rowInput,n,r.verticalInput)}catch(e){r++}}))}provideRandomizeInputForShipPlacement(){let e="ABCDEFGHIJ";e=e.split("");const t=e[Math.floor(Math.random()*e.length)];let r=!1;return Math.floor(10*Math.random())>5&&(r=!0),{rowInput:t,verticalInput:r}}startGame(){document.querySelector("#start-game").addEventListener("click",(()=>{this.addEventListenerToCpuCell()}))}addEventListenerToCpuCell(){const e=["1","2","3","4","5","6","7","8","9","10"],t=["A","B","C","D","E","F","G","H","I","J"],r=this.playerCPU,n=r.gameboard;for(let a=0;a<10;a++)for(let o=0;o<10;o++){const i=document.getElementById(`${r.name}-${t[a]}${e[o]}`),s=`${t[a]}${e[o]}`;i.addEventListener("click",(()=>{const e=n.receiveAttack(s);console.log(e),1==n.getAllShipStatus()&&"already hit"!==e?this.cpuPlayTurn():0==n.getAllShipStatus()&&(this.whoWin="You Win!!",this.gameEndEvent())}))}}resetGame(){document.getElementById("resetGame").addEventListener("click",(()=>{let e=this.playerHuman.gameboard,t=this.playerCPU.gameboard;document.querySelector("dialog").showModal();const r=document.getElementById("player-grid"),n=document.getElementById("cpu-grid");r.innerHTML="",n.innerHTML="",this.cpuGridArray=[],this.hitArray=[],e.createBoard(),t.createBoard(),e.resetBoard(),t.resetBoard();const a=this.playerHuman;this.placeShip(this.playerCPU),this.placeShip(this.playerHuman),document.querySelectorAll(".grid-square").forEach((e=>{e.style.backgroundColor="#f0f0f0"})),new w(a,e).updateShipToDOM(a,e)}))}gameEndEvent(){const e=document.querySelector("#game-end"),t=document.getElementById("show-winner");e.showModal();const r=this.whoWin;t.innerText=r,document.getElementById("restartGame").addEventListener("click",(()=>{e.close();let t=this.playerHuman.gameboard,r=this.playerCPU.gameboard;document.querySelector("dialog").showModal();const n=document.getElementById("player-grid"),a=document.getElementById("cpu-grid");n.innerHTML="",a.innerHTML="",this.cpuGridArray=[],this.hitArray=[],t.createBoard(),r.createBoard(),t.resetBoard(),r.resetBoard();const o=this.playerHuman;this.placeShip(this.playerCPU),this.placeShip(this.playerHuman),document.querySelectorAll(".grid-square").forEach((e=>{e.style.backgroundColor="#f0f0f0"})),new w(o,t).updateShipToDOM(o,t)}))}cpuPlayTurn(){const e=this.playerHuman.gameboard;this.cpuGridArray=Object.keys(e.getBoard()),this.hitArray.forEach((e=>{this.cpuGridArray.splice(e,1)}));let t=Math.floor(Math.random()*this.cpuGridArray.length);const r=this.cpuGridArray[t];this.hitArray.push(t),e.receiveAttack(r),0==e.getAllShipStatus()&&(console.log("All player ship destroyed, game end"),this.whoWin="You Lose!!",this.gameEndEvent())}};A.initializeBoard(),A.startGame()})();